"use client";

import { useState } from "react";
import { Link, useLocation } from "react-router-dom";
import { motion, AnimatePresence } from "motion/react";

export function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const location = useLocation();

  const navLinks = [
    { href: "/mission", label: "Mission", type: "page" },
    { href: "#projects", label: "Projects", type: "anchor" },
    { href: "#science", label: "Science", type: "anchor" },
    { href: "#contact", label: "Contact", type: "anchor" },
  ];

  return (
    <header className="sticky top-0 z-50 bg-neutral-50 border-b border-neutral-200">
      <nav className="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
        <Link to="/" className="flex items-center gap-2">
          <svg width="26px" height="46px" viewBox="0 0 26 46" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
            <title>icon</title>
            <g id="Page-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
              <g id="behemoth" fill="#141414">
                <path d="M14.161039,6.2260998e-16 C17.3883606,-4.70051918e-16 19.0918689,0.440921653 20.6400171,1.26888034 C22.1881652,2.09683903 23.403161,3.31183476 24.2311197,4.85998291 C25.0590783,6.40813106 25.5,8.11163942 25.5,11.338961 L25.5,34.661039 C25.5,37.8883606 25.0590783,39.5918689 24.2311197,41.1400171 C23.403161,42.6881652 22.1881652,43.903161 20.6400171,44.7311197 C19.0918689,45.5590783 17.3883606,46 14.161039,46 L11.338961,46 C8.11163942,46 6.40813106,45.5590783 4.85998291,44.7311197 C3.31183476,43.903161 2.09683903,42.6881652 1.26888034,41.1400171 C0.440921653,39.5918689 0,37.8883606 0,34.661039 L0,11.338961 C0,8.11163942 0.440921653,6.40813106 1.26888034,4.85998291 C2.09683903,3.31183476 3.31183476,2.09683903 4.85998291,1.26888034 C5.51489649,0.918628727 6.1976125,0.637639185 7.01172726,0.429990954 L7.01238281,36.914 L8.85123437,36.914 L8.85123437,34.6060156 C9.09332292,34.9999271 9.37336719,35.3594023 9.69136719,35.6844414 C10.0093672,36.0094805 10.3622865,36.2890417 10.750125,36.523125 C11.1379635,36.7572083 11.5580299,36.9382917 12.0103242,37.066375 C12.4626185,37.1944583 12.9413438,37.2585 13.4465,37.2585 C14.0929896,37.2585 14.6732982,37.1714779 15.1874258,36.9974336 C15.7015534,36.8233893 16.1613698,36.5786784 16.566875,36.2633008 C16.9723802,35.9479232 17.3217799,35.5796146 17.6150742,35.158375 C17.9083685,34.7371354 18.150388,34.2733854 18.3411328,33.767125 C18.5318776,33.2608646 18.6696224,32.726862 18.7543672,32.1651172 C18.839112,31.6033724 18.8814844,31.0345885 18.8814844,30.4587656 C18.8814844,29.8826667 18.839112,29.3124336 18.7543672,28.7480664 C18.6696224,28.1836992 18.5318776,27.645349 18.3411328,27.1330156 C18.150388,26.6206823 17.9083685,26.141888 17.6150742,25.6966328 C17.3217799,25.2513776 16.9723802,24.8666445 16.566875,24.5424336 C16.1613698,24.2182227 15.6971367,23.9646784 15.1741758,23.7818008 C14.6512148,23.5989232 14.0576563,23.5074844 13.3935,23.5074844 C12.9181562,23.5074844 12.4601341,23.5640729 12.0194336,23.67725 C11.5787331,23.7904271 11.1688802,23.9596406 10.789875,24.1848906 C10.4108698,24.4101406 10.0592617,24.6852852 9.73505078,25.0103242 C9.41083984,25.3353633 9.11623437,25.7098828 8.85123437,26.1338828 L8.85123437,20.1920156 C9.09332292,20.5859271 9.37336719,20.9454023 9.69136719,21.2704414 C10.0093672,21.5954805 10.3622865,21.8750417 10.750125,22.109125 C11.1379635,22.3432083 11.5580299,22.5242917 12.0103242,22.652375 C12.4626185,22.7804583 12.9413438,22.8445 13.4465,22.8445 C14.0929896,22.8445 14.6732982,22.7574779 15.1874258,22.5834336 C15.7015534,22.4093893 16.1613698,22.1646784 16.566875,21.8493008 C16.9723802,21.5339232 17.3217799,21.1656146 17.6150742,20.744375 C17.9083685,20.3231354 18.150388,19.8593854 18.3411328,19.353125 C18.5318776,18.8468646 18.6696224,18.312862 18.7543672,17.7511172 C18.839112,17.1893724 18.8814844,16.6205885 18.8814844,16.0447656 C18.8814844,15.4686667 18.839112,14.8984336 18.7543672,14.3340664 C18.6696224,13.7696992 18.5318776,13.231349 18.3411328,12.7190156 C18.150388,12.2066823 17.9083685,11.727888 17.6150742,11.2826328 C17.3217799,10.8373776 16.9723802,10.4526445 16.566875,10.1284336 C16.1613698,9.80422266 15.6971367,9.55067839 15.1741758,9.36780078 C14.6512148,9.18492318 14.0576563,9.09348437 13.3935,9.09348437 C12.9181562,9.09348437 12.4601341,9.15007292 12.0194336,9.26325 C11.5787331,9.37642708 11.1688802,9.54564063 10.789875,9.77089062 C10.4108698,9.99614062 10.0592617,10.2712852 9.73505078,10.5963242 C9.41083984,10.9213633 9.11623437,11.2958828 8.85123437,11.7198828 L8.85000672,0.113258343 C9.57087638,0.0382110118 10.3888906,1.77635684e-15 11.338961,1.77635684e-15 L14.161039,6.2260998e-16 Z M13.1379886,25.3445 C13.6099865,25.3445 14.0355384,25.4163171 14.4146445,25.5599514 C14.7937506,25.7035857 15.1280936,25.8989283 15.4176736,26.1459793 C15.7072536,26.3930303 15.951532,26.6850421 16.1505088,27.0220148 C16.3494857,27.3589875 16.5105654,27.7190085 16.6337479,28.1020778 C16.7569305,28.4851471 16.8508319,28.8819117 16.9154523,29.2923717 C16.9800726,29.7028317 17.0123828,30.114227 17.0123828,30.5265576 C17.0123828,30.9316731 16.9831017,31.3437365 16.9245395,31.7627478 C16.8659773,32.181759 16.7720759,32.5858056 16.6428352,32.9748875 C16.5135944,33.3639694 16.3482067,33.7325416 16.146672,34.0806042 C15.9451373,34.4286668 15.6995799,34.7335723 15.4099999,34.9953208 C15.12042,35.2570692 14.7830479,35.4640362 14.3978836,35.6162217 C14.0127194,35.7684072 13.5755223,35.8445 13.0862923,35.8445 C12.6140252,35.8445 12.1866558,35.7756224 11.8041841,35.6378671 C11.4217124,35.5001118 11.0783494,35.3077086 10.7740953,35.0606577 C10.4698411,34.8136067 10.2092056,34.5246012 9.99218895,34.1936411 C9.77517226,33.862681 9.59295632,33.5069356 9.44554113,33.1264049 C9.29812595,32.7458743 9.1890791,32.3430971 9.11840058,31.9180732 C9.04772207,31.4930493 9.01238281,31.0745057 9.01238281,30.6624424 C9.01238281,30.2450345 9.04772207,29.8238186 9.11840058,29.3987947 C9.1890791,28.9737709 9.29509687,28.566718 9.43645389,28.1776361 C9.57781092,27.7885542 9.76137312,27.4200488 9.98714049,27.0721198 C10.2129079,26.7241908 10.4778513,26.4223584 10.7819709,26.1666225 C11.0860904,25.9108867 11.4324151,25.7099323 11.820945,25.5637594 C12.2094749,25.4175865 12.6484894,25.3445 13.1379886,25.3445 Z M13.1379886,10.9305 C13.6099865,10.9305 14.0355384,11.0023171 14.4146445,11.1459514 C14.7937506,11.2895857 15.1280936,11.4849283 15.4176736,11.7319793 C15.7072536,11.9790303 15.951532,12.2710421 16.1505088,12.6080148 C16.3494857,12.9449875 16.5105654,13.3050085 16.6337479,13.6880778 C16.7569305,14.0711471 16.8508319,14.4679117 16.9154523,14.8783717 C16.9800726,15.2888317 17.0123828,15.700227 17.0123828,16.1125576 C17.0123828,16.5176731 16.9831017,16.9297365 16.9245395,17.3487478 C16.8659773,17.767759 16.7720759,18.1718056 16.6428352,18.5608875 C16.5135944,18.9499694 16.3482067,19.3185416 16.146672,19.6666042 C15.9451373,20.0146668 15.6995799,20.3195723 15.4099999,20.5813208 C15.12042,20.8430692 14.7830479,21.0500362 14.3978836,21.2022217 C14.0127194,21.3544072 13.5755223,21.4305 13.0862923,21.4305 C12.6140252,21.4305 12.1866558,21.3616224 11.8041841,21.2238671 C11.4217124,21.0861118 11.0783494,20.8937086 10.7740953,20.6466577 C10.4698411,20.3996067 10.2092056,20.1106012 9.99218895,19.7796411 C9.77517226,19.448681 9.59295632,19.0929356 9.44554113,18.7124049 C9.29812595,18.3318743 9.1890791,17.9290971 9.11840058,17.5040732 C9.04772207,17.0790493 9.01238281,16.6605057 9.01238281,16.2484424 C9.01238281,15.8310345 9.04772207,15.4098186 9.11840058,14.9847947 C9.1890791,14.5597709 9.29509687,14.152718 9.43645389,13.7636361 C9.57781092,13.3745542 9.76137312,13.0060488 9.98714049,12.6581198 C10.2129079,12.3101908 10.4778513,12.0083584 10.7819709,11.7526225 C11.0860904,11.4968867 11.4324151,11.2959323 11.820945,11.1497594 C12.2094749,11.0035865 12.6484894,10.9305 13.1379886,10.9305 Z" id="icon"></path>
              </g>
            </g>
          </svg>
          <span className="hidden sm:inline text-neutral-900">behemoth</span>
        </Link>

        {/* Desktop Navigation */}
        <ul className="hidden md:flex items-center gap-8">
          {navLinks.map((link) => (
            <li key={link.href}>
              {link.type === "page" ? (
                <Link to={link.href} className="text-neutral-600 hover:text-neutral-900 transition-colors">
                  {link.label}
                </Link>
              ) : (
                <Link 
                  to={`/${link.href}`}
                  className="text-neutral-600 hover:text-neutral-900 transition-colors"
                >
                  {link.label}
                </Link>
              )}
            </li>
          ))}
        </ul>

        {/* Hamburger Menu Button */}
        <button
          className="md:hidden w-8 h-8 flex flex-col justify-center items-center gap-1.5 relative z-50"
          onClick={() => setIsMenuOpen(!isMenuOpen)}
          aria-label="Toggle menu"
        >
          <motion.span
            className="w-6 h-0.5 bg-neutral-900 block"
            animate={{
              rotate: isMenuOpen ? 45 : 0,
              y: isMenuOpen ? 8 : 0,
            }}
            transition={{ duration: 0.3 }}
          />
          <motion.span
            className="w-6 h-0.5 bg-neutral-900 block"
            animate={{
              opacity: isMenuOpen ? 0 : 1,
            }}
            transition={{ duration: 0.3 }}
          />
          <motion.span
            className="w-6 h-0.5 bg-neutral-900 block"
            animate={{
              rotate: isMenuOpen ? -45 : 0,
              y: isMenuOpen ? -8 : 0,
            }}
            transition={{ duration: 0.3 }}
          />
        </button>
      </nav>

      {/* Mobile Menu */}
      <AnimatePresence>
        {isMenuOpen && (
          <motion.div
            className="fixed inset-0 bg-neutral-50 z-40 md:hidden"
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.3 }}
          >
            <div className="flex flex-col items-center justify-center h-full gap-8">
              {navLinks.map((link, index) => (
                <motion.div
                  key={link.href}
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: -20 }}
                  transition={{
                    duration: 0.4,
                    delay: index * 0.1,
                  }}
                >
                  <Link
                    to={link.type === "page" ? link.href : `/${link.href}`}
                    className="text-neutral-900 text-2xl"
                    onClick={() => setIsMenuOpen(false)}
                  >
                    {link.label}
                  </Link>
                </motion.div>
              ))}
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </header>
  );
}
